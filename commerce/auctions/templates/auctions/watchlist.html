{% extends 'auctions/layout.html' %}

{% block title %}
    Watchlist - Auctions
{% endblock title %}

{% block body %}
    <h2>Watchlist</h2>
    <div class="listings">
        {% for listing in watchlist %}
            {% if listing.image != "" %}
                <div class="listing-card" style="--_listing-img: url('{{ listing.image }}')" title="{{ listing.item }}">
            {% else %}
                <div class="listing-card" style="--_listing-img: url('https://media.istockphoto.com/id/917901978/photo/gavel-on-auction-word.jpg?s=612x612&w=0&k=20&c=e5mnLUG2UEg6y8zfO1zc7Gi4Ed8PEEeV3eGeYOKxKBI=')" title="Default Auctions image">
            {% endif %}
                <div class="listing-card__content">
                    <h3 class="listing-card__title">{{ listing.item }}</h3>
                    {% if listing.number_of_bids == 0 %}
                        <h6><strong>${{ listing.listing_price }}</strong></h6>
                    {% else %}
                        <h6><strong>${{ listing.highest_bid.bid }}</strong></h6>
                    {% endif %}
                    <div class="listing-card__body">
                        <p class="listing-card__description">{{ listing.description }}</p>
                        <p>Listed by {{ listing.lister }}</p>
                    </div>
                    <a href="{% url 'listing' listing.id %}" class="listing-card__button button button-primary">See Listing</a>
                </div>
            </div>
        {% empty %}
            <h3>Your watchlist is empty.</h3>
        {% endfor %}
    </div>
{% endblock body %}