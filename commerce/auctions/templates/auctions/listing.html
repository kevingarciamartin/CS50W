{% extends 'auctions/layout.html' %}

{% block title %}
    {{ listing.item }} - Auctions
{% endblock title %}

{% block body %}
<div class="card-grid">
    <img src="{{ listing.image }}" alt="{{ listing.item }}">
    <div>
        {% if user.is_authenticated %}
            <div class="d-flex gap">
                <h2>{{ listing.item }}</h2>
                {% if listing_in_watchlist %}
                    <form action="{% url 'remove_from_watchlist' listing_id=listing.id %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-warning">Remove From Watchlist</button>
                    </form>
                {% else %}
                    <form action="{% url 'add_to_watchlist' listing_id=listing.id %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning">Add to Watchlist</button>
                    </form>
                {% endif %}
            </div>
        {% else %}
            <h2>{{ listing.item }}</h2>
        {% endif %}
        <p>{{ listing.description }}</p>
        {% if user.is_authenticated %}
                <h3>${{ listing.price }}</h3>
                <form action="{% url 'bid' listing_id=listing.id %}" method="POST">
                    {% csrf_token %}
                    <input type="number" name="bid" placeholder="Bid" min="{{ listing.price }}" step=".01">
                    <input type="submit" value="Bid">
                </form>
        {% else %}
            <h3>${{ listing.price }}</h3>
        {% endif %}
        <h4>Details</h4>
        <ul>
            <li>Listed by: {{ listing.lister }}</li>
            <li>Category: {{ listing.category }}</li>
            <li>Created: {{ listing.timestamp }}</li>
        </ul>
    </div>
</div>
{% endblock body %}